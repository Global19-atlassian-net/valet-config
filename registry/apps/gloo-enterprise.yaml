name: gloo-enterprise
requiredValues:
  - Version
values:
  Namespace: gloo-system
resources:
  - helmChart:
      repoUrl: "https://storage.googleapis.com/gloo-ee-helm/"
      chartName: gloo-ee
      repoName: gloo-ee
      set:
        - "gloo.namespace.create=true"
        # NOTE: currently, grafana / prometheus are disabled because reapplying causes an error
        - "prometheus.enabled=false"
        - "grafana.defaultInstallationEnabled=false"
        - "gloo.gatewayProxies.gatewayProxyV2.readConfig=true"
      setEnv:
        license_key: LICENSE_KEY
  - application:
      path: registry/apps/gloo-app.yaml
      values:
        UpstreamName: gloo-system-apiserver-ui-8080
        UpstreamNamespace: "key:Namespace"
        VirtualServiceName: glooui
    flags:
      - gloo-app