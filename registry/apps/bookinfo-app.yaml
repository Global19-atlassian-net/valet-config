name: bookinfo-app
requiredValues:
  - Domain
values:
  VirtualServiceName: bookinfo
  Namespace: bookinfo
  UpstreamName: bookinfo-productpage-9080
  UpstreamNamespace: gloo-system
resources:
  - application:
      path: registry/apps/gloo-app.yaml
  - patch:
      path: registry/patches/istio/bookinfo-upstream-ssl.yaml
      kubeType: upstream
      name: "{{ .UpstreamName }}"
      namespace: "{{ .UpstreamNamespace }}"
      patchType: merge
    flags:
      - ssl
  - patch:
      path: registry/patches/istio/gateway-proxy-deployment-ssl.yaml
      kubeType: deployment
      name: gateway-proxy-v2
      namespace: gloo-system
      patchType: strategic
    flags:
      - ssl